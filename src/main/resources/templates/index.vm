<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Analyze emails with Elasticsearch</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css" media="all" type="text/css" />

</head>

<body>

<!-- ------------------------------------- -->
<h1>Analyze emails with Elasticsearch</h1>

<div class="box">

    <p>Say something about Elasticsearch.</p>

</div>

<!-- ------------------------------------- -->
<h2>Data in Elasticsearch</h2>

#if ( $numberOfEmails == 0)
<div class="alert alert-warning">
    <p>
        There are no emails in the database. You have to import them.
    </p>
</div>
#else
<div class="alert alert-info">
    <p>
        There are ${numberOfEmails} emails loaded.
    </p>
</div>

<form action="/delete" method="post">
    <button class="btn btn-danger" type="submit">Delete emails</button>
</form>
#end

<!-- ------------------------------------- -->
<h3>Import emails</h3>

<div class="box">

    <p>
        Connection datat for email storage: POP3 / IMAP / JavaMail
    </p>
    <form action="/import" method="post">
        protocol: <input type="text" name="protocol"><br/>
        host: <input type="text" name="host"><br/>
        user: <input type="text" name="user"><br/>
        password: <input type="text" name="password"><br/>
        folder: <input type="text" name="folder"><br/>
        <button class="btn btn-primary" type="submit">Import emails</button>
    </form>

</div>

<div class="box">

    <p>
        Connection datat for email storage: POP3 / IMAP / JavaMail
    </p>
    <form:form action="/import" method="post">
        <table>
            <tr>
                <td>protocol</td>
                <td><input type="text" name="protocol"></td>
                <td><span name="protocol.errors">Field is required.</span></td>
            </tr>
            <tr>
                <td>host</td>
                <td><input type="text" name="host"></td>
                <td><span name="host.errors">Field is required.</span></td>
            </tr>
            <tr>
                <td>user</td>
                <td><input type="text" name="user"></td>
                <td><span name="user.errors">Field is required.</span></td>
            </tr>
            <tr>
                <td>password</td>
                <td><input type="text" name="password"></td>
                <td><span name="password.errors">Field is required.</span></td>
            </tr>
            <tr>
                <td>folder</td>
                <td><input type="text" name="folder"></td>
                <td><span name="folder.errors">Field is required.</span></td>
            </tr>
        </table>
        <div class="padded">
            <button class="btn btn-primary" type="submit">Import emails</button>
        </div>
    </form:form>

</div>

<!-- ------------------------------------- -->
#if ( $numberOfEmails > 0)
<h2>Analyse emails</h2>

<div class="box">

    <p>Enter the topics seperated by white space:</p>

    <form action="/analyse" method="post">
        topics: <input type="text" name="topics"><br/>
        <button class="btn btn-primary" type="submit">Analyze</button>
    </form>

    <div id="graph">
    </div>

</div>
#end

<!-- ------------------------------------- -->
<h2>Rest</h2>

<div class="box">

    <p class="box-p">
        Index says ${name}
    </p>

    <ul>
        <li>Import emails from Imap provider</li>
        <li>Analyse email data in Elasticsearch</li>
    </ul>

    <p class="box-p">
        Import:
            Email:    IMAP host, user, password, folder
            ES: host, url, index, type
    </p>

    <p class="box-p">
        Bisher: in application.propeties: spring.data.elasticsearch.cluster-nodes=ubuntu-desktop:9300
    </p>

    <p class="box-p">
        Bisher: in Klasse index und type
    </p>

    <p class="box-p">
        Bisher protocol, host, user, password
    </p>

</div>

<div>
    Copyright © 2016 Jörn Dinkla, <a href="http://www.dinkla.com">www.dinkla.com</a>
</div>

<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="js/bootstrap.min.js"></script>

</body>
</html>
